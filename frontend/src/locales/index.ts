// 简化的i18n
export type Lang = 'zh' | 'en'

const zh: Record<string, string> = {
  'app.name': 'AI Platform',
  'app.title': '大模型全生命周期管理平台',
  'nav.dashboard': '仪表盘',
  'nav.projects': '项目管理',
  'nav.experiments': '实验管理',
  'nav.tasks': '任务调度',
  'nav.training': '创建训练',
  'nav.inference': '推理服务',
  'nav.datasets': '数据集',
  'nav.models': '模型管理',
  'nav.settings': '系统设置',
  'login.title': '登录',
  'login.username': '用户名',
  'login.password': '密码',
  'login.submit': '登录',
  'dashboard.title': '仪表盘',
  'projects.title': '项目管理',
  'projects.create': '创建项目',
  'experiments.title': '实验管理',
  'experiments.create': '创建实验',
  'tasks.title': '任务调度',
  'datasets.title': '数据集',
  'datasets.create': '创建数据集',
  'models.title': '模型管理',
  'training.title': '创建训练任务',
  'inference.title': '推理服务',
  'settings.title': '系统设置',
  'projects.name': '项目名称',
  'projects.description': '描述',
  'projects.status': '状态',
  'projects.active': '活跃',
  'projects.archived': '归档',
  'projects.experiments': '实验数',
  'projects.created': '创建时间',
  'experiments.name': '实验名称',
  'experiments.baseModel': '基础模型',
  'experiments.type': '任务类型',
  'experiments.fineTuning': '微调',
  'experiments.training': '训练',
  'experiments.distillation': '蒸馏',
  'experiments.status': '状态',
  'experiments.completed': '已完成',
  'experiments.running': '运行中',
  'experiments.pending': '等待中',
  'experiments.loss': 'Loss',
  'experiments.action': '操作',
  'experiments.details': '详情',
  'experiments.stop': '停止',
  'tasks.name': '任务名称',
  'tasks.type': '类型',
  'tasks.training': '训练',
  'tasks.inference': '推理',
  'tasks.data': '数据处理',
  'tasks.gpu': 'GPU',
  'tasks.progress': '进度',
  'tasks.start': '启动',
  'tasks.stop': '停止',
  'tasks.action': '操作',
  'tasks.log': '日志',
  'tasks.delete': '删除',
  'tasks.startTime': '开始时间',
  'datasets.name': '数据集名称',
  'datasets.type': '类型',
  'datasets.format': '格式',
  'datasets.size': '大小',
  'datasets.rows': '行数',
  'datasets.annotation': '标注状态',
  'datasets.annotated': '已标注',
  'datasets.annotating': '标注中',
  'datasets.notAnnotated': '未标注',
  'datasets.action': '操作',
  'datasets.view': '查看',
  'models.name': '模型名称',
  'models.baseModel': '基础模型',
  'models.params': '参数量',
  'models.quantization': '量化',
  'models.stage': '阶段',
  'models.production': '生产',
  'models.staging': '预发布',
  'models.deploy': '部署',
  'models.download': '下载',
  'models.register': '注册模型',
  'models.action': '操作',
  'models.details': '详情',
  'models.created': '创建时间',
  'inference.name': '服务名称',
  'inference.model': '选择模型',
  'inference.replicas': '副本数',
  'inference.running': '运行中',
  'inference.stopped': '已停止',
  'inference.deploy': '部署服务',
  'inference.action': '操作',
  'inference.test': '测试',
  'training.basic': '基础配置',
  'training.model': '模型选择',
  'training.params': '参数配置',
  'training.name': '任务名称',
  'training.method': '训练方法',
  'training.full': '全参数微调',
  'training.lora': 'LoRA',
  'training.qlora': 'QLoRA',
  'training.learningRate': '学习率',
  'training.epochs': '训练轮数',
  'training.batchSize': '批次大小',
  'training.gpu': 'GPU数量',
  'training.start': '开始训练',
  'training.action': '操作',
  'training.next': '下一步',
  'training.previous': '上一步',
  'training.createAnother': '创建另一个',
  'training.viewTasks': '查看任务',
  'settings.general': '通用设置',
  'settings.notifications': '通知设置',
  'settings.security': '安全设置',
  'settings.siteName': '站点名称',
  'settings.language': '默认语言',
  'settings.chinese': '中文',
  'settings.english': 'English',
  'settings.save': '保存设置',
  'settings.timezone': '时区',
  'settings.taskComplete': '任务完成',
  'settings.taskFailed': '任务失败',
  'settings.lowGPU': 'GPU不足警告',
  'settings.storageFull': '存储空间不足',
  'settings.emailNotif': '邮件通知',
  'settings.changePwd': '修改密码',
  'settings.currentPwd': '当前密码',
  'settings.newPwd': '新密码',
  'settings.confirmPwd': '确认密码',
  'settings.updatePwd': '更新密码',
  'settings.apiKey': 'API密钥',
  'settings.regenKey': '重新生成',
  'settings.sessionTimeout': '会话超时',
  'settings.activeSessions': '查看活跃会话',
  'common.search': '搜索',
  'common.upload': '上传',
  'common.save': '保存',
  'common.cancel': '取消',
  'common.edit': '编辑',
  'common.delete': '删除',
  'common.all': '全部',
  'common.start': '启动',
  'common.stop': '停止',
  'common.select': '选择',
  'common.inputPlaceholder': '请输入...',
  'common.selectPlaceholder': '请选择...',
  'common.description': '描述',
  'common.label': '标签',
  'common.success': '成功',
  'common.failed': '失败',
  'common.timezone': '时区',
  'common.apiEndpoint': 'API端点',
}

const en: Record<string, string> = {
  'app.name': 'AI Platform',
  'app.title': 'AI Model Lifecycle Management',
  'nav.dashboard': 'Dashboard',
  'nav.projects': 'Projects',
  'nav.experiments': 'Experiments',
  'nav.tasks': 'Tasks',
  'nav.training': 'Training',
  'nav.inference': 'Inference',
  'nav.datasets': 'Datasets',
  'nav.models': 'Models',
  'nav.settings': 'Settings',
  'login.title': 'Login',
  'login.username': 'Username',
  'login.password': 'Password',
  'login.submit': 'Login',
  'dashboard.title': 'Dashboard',
  'projects.title': 'Project Management',
  'projects.create': 'Create Project',
  'experiments.title': 'Experiment Management',
  'experiments.create': 'Create Experiment',
  'tasks.title': 'Task Scheduling',
  'datasets.title': 'Datasets',
  'datasets.create': 'Create Dataset',
  'models.title': 'Model Management',
  'training.title': 'Create Training Task',
  'inference.title': 'Inference Services',
  'settings.title': 'System Settings',
  'projects.name': 'Project Name',
  'projects.description': 'Description',
  'projects.status': 'Status',
  'projects.active': 'Active',
  'projects.archived': 'Archived',
  'projects.experiments': 'Experiments',
  'projects.created': 'Created',
  'experiments.name': 'Experiment Name',
  'experiments.baseModel': 'Base Model',
  'experiments.type': 'Task Type',
  'experiments.fineTuning': 'Fine-tuning',
  'experiments.training': 'Training',
  'experiments.distillation': 'Distillation',
  'experiments.status': 'Status',
  'experiments.completed': 'Completed',
  'experiments.running': 'Running',
  'experiments.pending': 'Pending',
  'experiments.loss': 'Loss',
  'experiments.action': 'Action',
  'experiments.details': 'Details',
  'experiments.stop': 'Stop',
  'tasks.name': 'Task Name',
  'tasks.type': 'Type',
  'tasks.training': 'Training',
  'tasks.inference': 'Inference',
  'tasks.data': 'Data Processing',
  'tasks.gpu': 'GPU',
  'tasks.progress': 'Progress',
  'tasks.start': 'Start',
  'tasks.stop': 'Stop',
  'tasks.action': 'Action',
  'tasks.log': 'Log',
  'tasks.delete': 'Delete',
  'tasks.startTime': 'Start Time',
  'datasets.name': 'Dataset Name',
  'datasets.type': 'Type',
  'datasets.format': 'Format',
  'datasets.size': 'Size',
  'datasets.rows': 'Rows',
  'datasets.annotation': 'Annotation',
  'datasets.annotated': 'Annotated',
  'datasets.annotating': 'Annotating',
  'datasets.notAnnotated': 'Not Annotated',
  'datasets.action': 'Action',
  'datasets.view': 'View',
  'models.name': 'Model Name',
  'models.baseModel': 'Base Model',
  'models.params': 'Parameters',
  'models.quantization': 'Quantization',
  'models.stage': 'Stage',
  'models.production': 'Production',
  'models.staging': 'Staging',
  'models.deploy': 'Deploy',
  'models.download': 'Download',
  'models.register': 'Register Model',
  'models.action': 'Action',
  'models.details': 'Details',
  'models.created': 'Created',
  'inference.name': 'Service Name',
  'inference.model': 'Select Model',
  'inference.replicas': 'Replicas',
  'inference.running': 'Running',
  'inference.stopped': 'Stopped',
  'inference.deploy': 'Deploy Service',
  'inference.action': 'Action',
  'inference.test': 'Test',
  'training.basic': 'Basic Config',
  'training.model': 'Model Selection',
  'training.params': 'Parameter Config',
  'training.name': 'Task Name',
  'training.method': 'Training Method',
  'training.full': 'Full Fine-tuning',
  'training.lora': 'LoRA',
  'training.qlora': 'QLoRA',
  'training.learningRate': 'Learning Rate',
  'training.epochs': 'Epochs',
  'training.batchSize': 'Batch Size',
  'training.gpu': 'GPU Count',
  'training.start': 'Start Training',
  'training.action': 'Action',
  'training.next': 'Next',
  'training.previous': 'Previous',
  'training.createAnother': 'Create Another',
  'training.viewTasks': 'View Tasks',
  'settings.general': 'General',
  'settings.notifications': 'Notifications',
  'settings.security': 'Security',
  'settings.siteName': 'Site Name',
  'settings.language': 'Language',
  'settings.chinese': 'Chinese',
  'settings.english': 'English',
  'settings.save': 'Save Settings',
  'settings.timezone': 'Timezone',
  'settings.taskComplete': 'Task Completion',
  'settings.taskFailed': 'Task Failed',
  'settings.lowGPU': 'Low GPU Warning',
  'settings.storageFull': 'Storage Full Alert',
  'settings.emailNotif': 'Email Notifications',
  'settings.changePwd': 'Change Password',
  'settings.currentPwd': 'Current Password',
  'settings.newPwd': 'New Password',
  'settings.confirmPwd': 'Confirm Password',
  'settings.updatePwd': 'Update Password',
  'settings.apiKey': 'API Key',
  'settings.regenKey': 'Regenerate Key',
  'settings.sessionTimeout': 'Session Timeout',
  'settings.activeSessions': 'View Active Sessions',
  'common.search': 'Search',
  'common.upload': 'Upload',
  'common.save': 'Save',
  'common.cancel': 'Cancel',
  'common.edit': 'Edit',
  'common.delete': 'Delete',
  'common.all': 'All',
  'common.start': 'Start',
  'common.stop': 'Stop',
  'common.select': 'Select',
  'common.inputPlaceholder': 'Please enter...',
  'common.selectPlaceholder': 'Please select...',
  'common.description': 'Description',
  'common.label': 'Label',
  'common.success': 'Success',
  'common.failed': 'Failed',
  'common.timezone': 'Timezone',
  'common.apiEndpoint': 'API Endpoint',
}

export function t(key: string, lang: Lang): string {
  const dict = lang === 'zh' ? zh : en
  return dict[key] || key
}

// React Context - 使用纯 JS 方式
import React, { createContext, useContext, useState, ReactNode } from 'react'

interface LangContextType {
  lang: Lang
  setLang: (l: Lang) => void
  t: (k: string) => string
}

const LangContext = createContext<LangContextType | undefined>(undefined)

export function LangProvider({ children }: { children: ReactNode }) {
  const [lang, setLang] = useState<Lang>('zh')
  const value: LangContextType = { lang, setLang, t: (k: string) => t(k, lang) }
  return React.createElement(LangContext.Provider, { value }, children)
}

export function useLang() {
  const ctx = useContext(LangContext)
  if (!ctx) throw new Error('useLang must be used within LangProvider')
  return ctx
}
