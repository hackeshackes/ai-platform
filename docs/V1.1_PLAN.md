# AI Platform v1.1 规划 - 团队讨论

## 📊 GitHub对标项目分析

### 主要竞品

| 项目 | 功能 | 特点 | Stars |
|------|------|------|--------|
| MLflow | 实验追踪、模型注册、部署 | 行业标准 | 15K+ |
| Airflow | 调度、监控、工作流 | Apache顶级 | 30K+ |
| BentoML | LLM部署、API网关 | 专注推理 | 8K+ |
| Dagster | 数据管道、资产编排 | Python优先 | 12K+ |
| Weights & Biases | 实验追踪、可视化 | 商业化 | - |

### 功能对比

| 功能 | AI Platform | MLflow | 差异化 |
|------|-------------|---------|---------|
| 项目管理 | ✅ | ✅ | 同质化 |
| 任务追踪 | ✅ | ✅ | 同质化 |
| **GPU监控** | ✅ | ❌ | **核心差异化** |
| Loss曲线 | ✅ | ✅ | 同质化 |
| 训练任务 | ✅ | ✅ | 同质化 |
| 推理服务 | ✅ | ✅ | 同质化 |
| 数据集 | ✅ | ✅ | 同质化 |
| 多用户 | ⏳ | ✅ | 需完善 |
| 权限管理 | ⏳ | ✅ | 需完善 |
| 任务队列 | ⏳ | ❌ | 可差异化 |

---

## 💡 核心洞察

### 差异化机会

1. **GPU实时监控** - 竞品普遍缺失，是核心卖点
2. **轻量级** - 比MLflow更简单，开箱即用
3. **中文本地化** - 国际化竞品中文支持弱
4. **专注LLM** - 垂直领域优化

### 竞品优势

1. MLflow - 生态完整，插件丰富
2. Airflow - 分布式调度能力强
3. W&B - 可视化最专业

---

## 🎯 v1.1 规划建议

### 优先级排序

| 优先级 | 功能 | 理由 | 工期 |
|--------|------|------|------|
| **P0** | 数据集版本控制 | CrawlerAgent建议，数据质量是刚需 | 3天 |
| **P0** | 多用户支持 | MarketTrendAgent建议，团队协作基础 | 5天 |
| **P1** | 数据质量检查 | CrawlerAgent建议，提升数据可信度 | 3天 |
| **P1** | 权限管理(RBAC) | 企业级功能基础 | 4天 |
| **P2** | Webhook通知 | 集成到现有工作流 | 2天 |

### 详细规划

#### P0: 数据集版本控制 (3天)

**目标**: 支持数据集版本管理，实验可复现

**功能**:
```
• 版本列表: 显示所有版本
• 版本对比: 对比两个版本差异
• 版本回滚: 回滚到指定版本
• 版本注释: 记录变更原因
```

**技术方案**:
```sql
CREATE TABLE dataset_versions (
    id INTEGER PRIMARY KEY,
    dataset_id INTEGER,
    version VARCHAR(20),  -- v1.0, v1.1
    parent_version_id INTEGER,
    commit_message TEXT,
    file_hash VARCHAR(64),  -- 数据指纹
    row_count INTEGER,
    created_at DATETIME
);
```

#### P0: 多用户支持 (5天)

**目标**: 支持多用户登录协作

**功能**:
```
• 用户注册/登录
• 用户列表管理
• 用户信息编辑
• 最后登录时间
```

**技术方案**:
```python
class User(Base):
    id, username, email, password_hash
    role: str  -- admin/user
    created_at, last_login
```

#### P1: 数据质量检查 (3天)

**目标**: 自动验证数据集质量

**功能**:
```
• 空值检测: 检查缺失字段
• 格式验证: 数据类型检查
• 异常值检测: IQR/Z-score
• 质量报告生成
```

**技术方案**:
```python
class DataQualityChecker:
    def check_nulls(df, threshold=0.1)
    def check_duplicates(df)
    def check_format(df, schema)
    def generate_report(df) -> QualityReport
```

#### P1: 权限管理 (4天)

**目标**: 基于角色的访问控制

**功能**:
```
• 角色定义: admin/developer/viewer
• 权限分配: 按角色分配
• 项目级权限: 隔离不同项目
• 操作审计: 记录权限变更
```

**技术方案**:
```python
class Role(Base):
    name: str  -- admin/developer/viewer
    permissions: List[str]

class ProjectPermission(Base):
    user_id, project_id, role_id
```

---

## 📋 v1.1 详细计划

### Sprint 1: 数据增强 (第1-6天)

| 天数 | 任务 | 产出 |
|------|------|------|
| 1-2 | 数据集版本API | endpoint + model |
| 3-4 | 前端版本管理页面 | dataset versions UI |
| 5-6 | 数据质量检查器 | QualityChecker类 |

### Sprint 2: 多用户 (第7-15天)

| 天数 | 任务 | 产出 |
|------|------|------|
| 7-8 | 用户认证API | register/login/me |
| 9-10 | 用户管理页面 | Users page |
| 11-12 | 权限API | RBAC endpoint |
| 13-14 | 权限管理页面 | Roles page |
| 15 | 测试 + 文档 | test + docs |

---

## 🎯 成功指标

### 功能指标

- [ ] 数据集版本功能完整
- [ ] 支持3种以上用户角色
- [ ] 数据质量检查通过率>95%
- [ ] 权限控制生效

### 性能指标

- [ ] API响应 < 300ms
- [ ] 页面加载 < 2s
- [ ] 支持10并发用户

### 质量指标

- [ ] 单元测试覆盖率 > 70%
- [ ] 无阻断性Bug
- [ ] 文档完整

---

## 🚀 实施建议

### 依赖关系

```
数据集版本 → 数据质量检查
多用户 → 权限管理
```

### 技术决策

1. **数据库**: 继续SQLite (MVP阶段)
2. **认证**: JWT延续
3. **前端**: 复用现有架构

### 风险

| 风险 | 概率 | 影响 | 应对 |
|------|------|------|------|
| 多用户安全 | 中 | 高 | 规范JWT实现 |
| 版本回滚兼容 | 低 | 中 | API版本控制 |
| 性能瓶颈 | 中 | 低 | 添加索引 |

---

## 📦 v1.1 交付物

### 代码

- backend/api/endpoints/users.py
- backend/api/endpoints/permissions.py
- backend/api/endpoints/versions.py
- frontend/src/pages/Users.tsx
- frontend/src/pages/Roles.tsx
- frontend/src/pages/Versions.tsx

### 文档

- API文档更新 (users/permissions/versions)
- 用户手册更新 (多用户章节)
- 部署文档更新 (生产配置)

### 测试

- 单元测试 (>70%覆盖)
- 集成测试 (API流程)
- 用户验收测试

---

**v1.1规划完成日期**: 2026-02-08  
**预计工期**: 15天  
**预计上线**: 2026-02-23
